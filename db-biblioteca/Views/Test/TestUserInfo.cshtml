@{
    ViewData["Title"] = "Test User Info";
}

<div class="content">
    <h2>Test User Information</h2>

    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Current User Information</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Profile ID:</label>
                        <p>@ViewBag.TestProfileId</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>User Object:</label>
                        <p>@(ViewBag.TestUser != null ? "User found" : "No user found")</p>
                    </div>
                </div>
            </div>

            @if (ViewBag.TestUser != null)
            {
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Username:</label>
                            <p>@ViewBag.TestUser.NombreUsuario</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Email:</label>
                            <p>@ViewBag.TestUser.Correo</p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Profile Name:</label>
                            <p>@ViewBag.TestUser.Perfil?.Nombre @ViewBag.TestUser.Perfil?.Apellido</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Role:</label>
                            <p>@ViewBag.TestUser.Rol?.Nombre</p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>

    <div class="card mt-3">
        <div class="card-header">
            <h3 class="card-title">ViewBag CurrentUser (for layout)</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>ViewBag.CurrentUser:</label>
                        <p>@(ViewBag.CurrentUser != null ? "User found" : "No user found")</p>
                    </div>
                </div>
                @if (ViewBag.CurrentUser != null)
                {
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Username:</label>
                            <p>@ViewBag.CurrentUser.NombreUsuario</p>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>