@model BibliotecaDB.Models.Compra

<div>
    <h4>Detalles de la Compra</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.Usuario.NombreUsuario)
        </dt>
        <dd class="col-sm-9">
            @Html.DisplayFor(model => model.Usuario.NombreUsuario)
        </dd>

        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.Proveedor.Nombre)
        </dt>
        <dd class="col-sm-9">
            @if (Model.Proveedor != null)
            {
                @Html.DisplayFor(model => model.Proveedor.Nombre)
            }
            else
            {
                <span>No asignado</span>
            }
        </dd>

        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.CondicionPago.Nombre)
        </dt>
        <dd class="col-sm-9">
            @if (Model.CondicionPago != null)
            {
                @Html.DisplayFor(model => model.CondicionPago.Nombre)
            }
            else
            {
                <span>No asignado</span>
            }
        </dd>

        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.NumeroOrdenCompra)
        </dt>
        <dd class="col-sm-9">
            @Html.DisplayFor(model => model.NumeroOrdenCompra)
        </dd>

        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.FechaCompra)
        </dt>
        <dd class="col-sm-9">
            @Html.DisplayFor(model => model.FechaCompra)
        </dd>

        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.FechaEntrega)
        </dt>
        <dd class="col-sm-9">
            @if (Model.FechaEntrega.HasValue)
            {
                @Html.DisplayFor(model => model.FechaEntrega)
            }
            else
            {
                <span>No especificado</span>
            }
        </dd>

        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.Total)
        </dt>
        <dd class="col-sm-9">
            @Html.DisplayFor(model => model.Total)
        </dd>

        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.Observaciones)
        </dt>
        <dd class="col-sm-9">
            @Html.DisplayFor(model => model.Observaciones)
        </dd>

        <dt class="col-sm-3">
            @Html.DisplayNameFor(model => model.Estado)
        </dt>
        <dd class="col-sm-9">
            <span class="badge @(Model.Estado == "Activo" ? "badge-success" : "badge-danger")">
                @Html.DisplayFor(model => model.Estado)
            </span>
        </dd>
    </dl>

    @if (Model.Detalles != null && Model.Detalles.Any())
    {
        <h5>Detalles de la Compra</h5>
        <hr />
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Descripci√≥n</th>
                    <th>Unidad</th>
                    <th>Cantidad</th>
                    <th>Precio Unitario</th>
                    <th>Total Parcial</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var detalle in Model.Detalles)
                {
                    <tr>
                        <td>@(detalle.Producto?.Nombre ?? "N/A")</td>
                        <td>@detalle.Descripcion</td>
                        <td>@detalle.UnidadMedida</td>
                        <td>@detalle.CantidadSolicitada</td>
                        <td>@detalle.PrecioUnitario</td>
                        <td>@detalle.TotalParcial</td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
</div>